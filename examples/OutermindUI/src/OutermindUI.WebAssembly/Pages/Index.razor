@inject IResizeListener _resizeListener
@implements IDisposable
@page "/"

<Surface
    ViewportSize="_viewportSize"
    GridSize="new(200, 200)"
    CellSize="new(20, 20)"
    MapMaxSize="new(300, 300)"
/>

@code {
    Size _viewportSize;

    protected override void OnAfterRender(bool firstRender)
    {
        if(firstRender)
        {
            _resizeListener.OnResized += OnViewportResized;
        }
    }

    void IDisposable.Dispose() =>
        _resizeListener.OnResized -= OnViewportResized;

    void OnViewportResized(object? _, BrowserWindowSize size)
    {
        _viewportSize = new(size.Width, size.Height);

        StateHasChanged();
    }
}
